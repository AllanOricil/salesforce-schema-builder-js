!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.schemaBuilder=i():t.schemaBuilder=i()}(window,(function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=3)}([function(t,i,e){window,t.exports=function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i),e.d(i,"Canvas",(function(){return d})),e.d(i,"Entity",(function(){return g})),e.d(i,"Circle",(function(){return w})),e.d(i,"Diamond",(function(){return x})),e.d(i,"Polygon",(function(){return v})),e.d(i,"Rectangle",(function(){return A})),e.d(i,"Shape",(function(){return y})),e.d(i,"Triangle",(function(){return C})),e.d(i,"Background",(function(){return E})),e.d(i,"Border",(function(){return m})),e.d(i,"Color",(function(){return u})),e.d(i,"Font",(function(){return B})),e.d(i,"Line",(function(){return L})),e.d(i,"Padding",(function(){return _})),e.d(i,"Shadow",(function(){return f})),e.d(i,"Dimension",(function(){return n})),e.d(i,"Position",(function(){return s})),e.d(i,"Rotation",(function(){return o})),e.d(i,"Scale",(function(){return r})),e.d(i,"Transform",(function(){return a})),e.d(i,"getTextHeight",(function(){return D})),e.d(i,"syntaxHighlight",(function(){return l})),e.d(i,"isMobile",(function(){return T})),e.d(i,"removeWhiteSpaces",(function(){return p})),e.d(i,"getBezierPoints",(function(){return F})),e.d(i,"getPathPointsGivenPath",(function(){return R}));class s{constructor({x:t,y:i}){this._x=t,this._y=i}get x(){return parseInt(this._x?this._x.toFixed(0):0)}get y(){return parseInt(this._y?this._y.toFixed(0):0)}set x(t){this._x=t}set y(t){this._y=t}}class n{constructor({width:t,height:i}){this._width=t,this._height=i}get width(){return this._width}get height(){return this._height}set width(t){this._width=t}set height(t){this._height=t}}class o{constructor({angle:t,referential:i}){this._angle=t,this._referential=new s(i||{x:0,y:0})}get angle(){return this._angle}set angle(t){this._angle=t}get referential(){return this._referential}}class r{constructor({horizontal:t,vertical:i}){this._horizontal=t,this._vertical=i}get horizontal(){return this._horizontal}get vertical(){return this._vertical}set horizontal(t){this._horizontal=t}set vertical(t){this._vertical=t}}class a{static get POSITION(){return new s({x:0,y:0})}static get DIMENSION(){return new n({width:0,height:0})}static get ROTATION(){return new o({angle:0})}static get SCALE(){return new r({horizontal:1,vertical:1})}constructor({position:t,dimension:i,rotation:e,scale:s}){this._position=t||a.POSITION,this._dimension=i?new n(i):a.DIMENSION,this._rotation=e?new o(e):a.ROTATION,this._scale=s?new r(s):a.SCALE}get position(){return this._position}get dimension(){return this._dimension}get rotation(){return this._rotation}get scale(){return this._scale}set position(t){this._position=t}set dimension(t){this._dimension=t}set rotation(t){this._rotation=t}set scale(t){this._scale=t}}class h{constructor(){this._entitiesMap=new Map,[...Array(100).keys()].forEach(t=>{this._entitiesMap.set(t,new Map)}),this._entitiesLayerMap=new Map}getLayer(t){return this._entitiesMap.get(t)}getEntityLayerByName(t){return this.getLayer(this._entitiesLayerMap.get(t))}getEntityByName(t){return this.getEntityLayerByName(t).get(t)}addEntity(t,i){t._canvas=i,this.getLayer(t._z||0).set(t._name,t),this._entitiesLayerMap.set(t._name,t._z)}removeEntityByName(t){return this.getEntityLayerByName(t).delete(t)}clearLayer(t){const i=this.getLayer(t);i&&i.clear()}getEntitiesInLayer(t){return this.getLayer(t).values()}get entities(){let t=[];for(let[i,e]of this._entitiesMap.entries())e.forEach(i=>{t.push(i)});return t}}class d{static get SCALE(){return{horizontal:1,vertical:1}}static get SCALELIMITS(){return{max:2,min:.2,speed:.01}}static get FPS(){return 60}static get CANMOVEENTITIES(){return!0}static get CANDRAGCANVAS(){return!0}constructor({options:t,canvas:i}){this._entityManager=new h,this._dpi=window.devicePixelRatio,this._el=i||document.getElementById("canvas"),this._el.style.maxHeight="none",this._el.focus(),this._imagesSource=t.imagesSource,this._el.style.backgroundImage=t.backgroundImage,this._el.style.backgroundColor=t.background&&t.background.color?t.background.color:null,this._fps=t.fps?t.fps:d.FPS,this._canMoveEntities=!1!==t.canMoveEntities,this._canDragCanvas=t.canDragCanvas?t.canDragCanvas:d.CANDRAGCANVAS,this._mouse=new s({x:0,y:0}),this._scaleLimits=t.zoom?{max:t.zoom.max||d.SCALELIMITS.max,min:t.zoom.min||d.SCALELIMITS.min,speed:t.zoom.speed||d.SCALELIMITS.speed}:d.SCALELIMITS,this._transform=new a({position:{x:0,y:0},dimension:{width:this._el.parentElement.clientWidth,height:this._el.parentElement.clientHeight},scale:{horizontal:t.zoom.level,vertical:t.zoom.level}}),this._el.width=this._el.parentElement.clientWidth,this._el.height=this._el.parentElement.clientHeight,this._el.setAttribute("width",this._el.parentElement.clientWidth),this._el.setAttribute("height",this._el.parentElement.clientHeight),"undefined"!=typeof OffscreenCanvas?("OffscreenCanvas"in window?this._offscreenCanvas=this._el.transferControlToOffscreen():this._offscreenCanvas=new OffscreenCanvas(this._transform.dimension.width,this._transform.dimension.height),this._ctx=this._offscreenCanvas.getContext("2d")):this._ctx=this._el.getContext("2d"),this._isScrolling=!1,this._tickTime=0,this._updateTime=0,this._drawTime=0;let e={x:0,y:0},n=void 0,o=!1,r=[],l=null,_=!1,c=null;this._el.addEventListener("mousedown",t=>{if(c)return c._selected=!0,void(this._canMoveEntities&&!l&&c._isDraggable&&(l=c));e=this.getTransformedPoint(t.offsetX,t.offsetY),o=!0}),this._el.addEventListener("mousemove",t=>{if(this._mouse.x=t.offsetX,this._mouse.y=t.offsetY,n=this.getTransformedPoint(t.offsetX,t.offsetY),o)return this._el.style.cursor="grabbing",void this._ctx.translate(n.x-e.x,n.y-e.y);if(l)return _=!0,void(l.position={x:n.x-l.dimension.width/2,y:n.y-l.dimension.height/2});for(let i=this._entityManager.entities.length-1;i>=0;i--){let e=this._entityManager.entities[i];if(e.contains(this._mouse))return e.emit("mousemove",t),c=e,this._el.style.cursor="grabbing",void(e._hover||(e._hover=!0,this._el.dispatchEvent(new CustomEvent("mouseenterentity",{detail:e})),e.emit("mousehover",t),e.emit("hover",t)));e._hover&&(e._hover=!1,this._el.dispatchEvent(new CustomEvent("mouseleaveentity",{detail:e})),e.emit("mouseleave",t))}c=null,this._el.style.cursor="default",this._el.style.cursor="default"}),this._el.addEventListener("mouseup",t=>{o=!1,l&&(l._selected=!1,l=null)},{passive:!0}),this._el.addEventListener("click",t=>{if(_)_=!1;else if(c){if(c.emit("click"),c._selected=!0,this._el.dispatchEvent(c.createEvent("clickentity")),0===r.length?r.push(c):r.forEach(t=>{t._id!==c._id&&r.push(c)}),2==r.length){let t=r.pop(),i=r.pop(),e=!1;for(let s=0;s<i.connections.length;s++)if(i.connections[s].to._id===t._id){e=!0;break}for(let s=0;s<t.connections.length;s++)if(t.connections[s].to._id===i._id){e=!0;break}r=[]}return}},{passive:!0}),this._el.addEventListener("mouseout",t=>{o=!1,r=[],l=null,_=!1},{passive:!0}),this._el.addEventListener("wheel",t=>{n=this.getTransformedPoint(t.offsetX,t.offsetY);const i=t.wheelDelta>0||t.deltaY<0?1+this._scaleLimits.speed:1-this._scaleLimits.speed,e=this._ctx.getTransform().a*i;c?c.emit("wheel",t):e>this._scaleLimits.min&&e<this._scaleLimits.max&&(this._ctx.translate(n.x,n.y),this._ctx.scale(i,i),this._ctx.translate(-n.x,-n.y))},{passive:!0});let g=null;this._el.addEventListener("touchstart",t=>{if(1===t.touches.length){this._mouse.x=t.touches[0].clientX,this._mouse.y=t.touches[0].clientY;for(let t=this._entityManager.entities.length-1;t>=0;t--){let i=this._entityManager.entities[t];if(i.contains(this._mouse))return c=i,l||(l=i),void this._el.dispatchEvent(i.createEvent("touchstartentity"))}o=!0,g&&(t.timeStamp,g.timeStamp,t.timeStamp-g.timeStamp<=200&&this._el.dispatchEvent(new CustomEvent("dbtouch",t))),g=t}},{passive:!0});let p=null;this._el.addEventListener("touchmove",t=>{if(1===t.touches.length){if(this._mouse.x=t.touches[0].clientX,this._mouse.y=t.touches[0].clientY,n=this.getTransformedPoint(this._mouse.x,this._mouse.y),o&&p){let t=this.getTransformedPoint(p.touches[0].clientX,p.touches[0].clientY);this._ctx.translate(n.x-t.x,n.y-t.y)}else l&&(_=!0,l.position={x:n.x-l.dimension.width/2,y:n.y-l.dimension.height/2});p=t}},{passive:!0}),this._el.addEventListener("touchend",t=>{l&&(l=null),o=!1,p=null},{passive:!0}),this._evCache=[],this.prevDiff=-1;const u=t=>{m(t),this._evCache.length<2&&(this.prevDiff=-1)},m=t=>{for(var i=0;i<this._evCache.length;i++)if(this._evCache[i].pointerId==t.pointerId){this._evCache.splice(i,1);break}};this._el.onpointerdown=t=>{this._evCache.push(t)},this._el.onpointermove=t=>{for(var i=0;i<this._evCache.length;i++)if(t.pointerId==this._evCache[i].pointerId){this._evCache[i]=t;break}if(2==this._evCache.length){var e=Math.abs(this._evCache[0].clientX-this._evCache[1].clientX);const t=(this._evCache[0].clientX+this._evCache[1].clientX)/2,i=(this._evCache[0].clientY+this._evCache[1].clientY)/2,s=this.getTransformedPoint(t,i);if(this.prevDiff>0){const t=e>this.prevDiff<0?1+this._scaleLimits.speed:1-this._scaleLimits.speed,i=this._ctx.getTransform().a*t;i>this._scaleLimits.min&&i<this._scaleLimits.max&&(this._ctx.translate(s.x,s.y),this._ctx.scale(t,t),this._ctx.translate(-s.x,-s.y))}this.prevDiff=e}},this._el.onpointerup=u,this._el.onpointercancel=u,this._el.onpointerout=u,this._el.onpointerleave=u,window.onresize=t=>{this._transform.dimension.width=this._el.parentElement.clientWidth,this._transform.dimension.height=this._el.parentElement.clientHeight,this._offscreenCanvas?(this._offscreenCanvas.width=this._transform.dimension.width,this._offscreenCanvas.height=this._transform.dimension.height):(this._el.width=this._transform.dimension.width,this._el.height=this._transform.dimension.height)},this.start()}clearFrame(){this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._el.width,this._el.height),this._ctx.restore()}start(){setInterval(()=>{this.draw()},1e3/this._fps)}draw(){this.clearFrame(),this._entityManager.entities.forEach(t=>{t.draw(this._ctx)})}getTransformedPoint(t,i){const e=this._ctx.getTransform(),s=1/e.a;return{x:s*t-s*e.e,y:s*i-s*e.f}}saveAsImage(t){var i=document.createElement("a");i.download=t+".png",i.href=this._el.toDataURL("image/png").replace("image/png","image/octet-stream"),i.click()}get ctx(){return this._ctx}get mouse(){return this._mouse}get entityManager(){return this._entityManager}}const l=function(t){return"string"!=typeof t&&(t=JSON.stringify(t,void 0,2)),(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(t){var i="number";return/^"/.test(t)?i=/:$/.test(t)?"key":"string":/true|false/.test(t)?i="boolean":/null/.test(t)&&(i="null"),'<span class="'+i+'">'+t+"</span>"}))};class _{constructor({top:t,right:i,bottom:e,left:s}){this._top=t,this._right=i,this._bottom=e,this._left=s}get top(){return this._top}get right(){return this._right}get bottom(){return this._bottom}get left(){return this._left}set top(t){this._top=t}set right(t){this._right=t}set bottom(t){this._bottom=t}set left(t){this._left=t}}class c{constructor(){this.callbacks={}}on(t,i){this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(i)}emit(t,i){let e=this.callbacks[t];e&&e.forEach(t=>t(i))}}class g{static get MAX_WIDTH(){return 350}static get PADDING(){return new _({top:0,right:0,bottom:0,left:0})}constructor({name:t,padding:i,dimension:e,position:n,rotation:o,parent:r},h){this._eventEmitter=new c,this._id=+new Date+1e5*Math.random(),this._name=t,this._selected=!1,this._hover=!1,this._transform=new a({position:n||null,dimension:e||null,rotation:o||null}),this._oldPosition=n?new s(n):null,this._padding=i?new _(i):g.PADDING,this._parent=r,this._children=[],this._canvas=h||void 0}createEvent(t){return new CustomEvent(t,{detail:this})}contains(t){return!!this._shape&&this._canvas.ctx.isPointInPath(this._shape.path,t.x,t.y,"nonzero")}toString(){return{id:this._id,name:this._name}}prettier(){return l(this.toString())}on(t,i){this._eventEmitter.on(t,i)}emit(t,i){this._eventEmitter.emit(t,i)}set state(t){this.states.includes(t)&&this.emit(t,{detail:this})}get shape(){return this._shape}get padding(){return this._padding}get dimension(){return this._transform.dimension}get position(){return this._transform.position}get children(){return this._children}get parent(){return this._parent}set position(t){this._oldPosition=new s(this._transform.position),this._transform.position.x=t.x,this._transform.position.y=t.y}get oldPosition(){return this._oldPosition}}const p=t=>t.replace(/\s/g,"");class u{static get htmlColors(){return{INDIANRED:"rgb(205, 92, 92)",LIGHTCORAL:"rgb(240, 128, 128)",SALMON:"rgb(250, 128, 114)",DARKSALMON:"rgb(233, 150, 122)",LIGHTSALMON:"rgb(255, 160, 122)",CRIMSON:"rgb(220, 20, 60)",RED:"rgb(255, 0, 0)",FIREBRICK:"rgb(178, 34, 34)",DARKRED:"rgb(139, 0, 0)",PINK:"rgb(255, 192, 203)",LIGHTPINK:"rgb(255, 182, 193)",HOTPINK:"rgb(255, 105, 180)",DEEPPINK:"rgb(255, 20, 147)",MEDIUMVIOLETRED:"rgb(199, 21, 133)",PALEVIOLETRED:"rgb(219, 112, 147)",LIGHTSALMON:"rgb(255, 160, 122)",CORAL:"rgb(255, 127, 80)",TOMATO:"rgb(255, 99, 71)",ORANGERED:"rgb(255, 69, 0)",DARKORANGE:"rgb(255, 140, 0)",ORANGE:"rgb(255, 165, 0)",GOLD:"rgb(255, 215, 0)",YELLOW:"rgb(255, 255, 0)",LIGHTYELLOW:"rgb(255, 255, 224)",LEMONCHIFFON:"rgb(255, 250, 205)",LIGHTGOLDENRODYELLOW:"rgb(250, 250, 210)",PAPAYAWHIP:"rgb(255, 239, 213)",MOCCASIN:"rgb(255, 228, 181)",PEACHPUFF:"rgb(255, 218, 185)",PALEGOLDENROD:"rgb(238, 232, 170)",KHAKI:"rgb(240, 230, 140)",DARKKHAKI:"rgb(189, 183, 107)",LAVENDER:"rgb(230, 230, 250)",THISTLE:"rgb(216, 191, 216)",PLUM:"rgb(221, 160, 221)",VIOLET:"rgb(238, 130, 238)",ORCHID:"rgb(218, 112, 214)",FUCHSIA:"rgb(255, 0, 255)",MAGENTA:"rgb(255, 0, 255)",MEDIUMORCHID:"rgb(186, 85, 211)",MEDIUMPURPLE:"rgb(147, 112, 219)",REBECCAPURPLE:"rgb(102, 51, 153)",BLUEVIOLET:"rgb(138, 43, 226)",DARKVIOLET:"rgb(148, 0, 211)",DARKORCHID:"rgb(153, 50, 204)",DARKMAGENTA:"rgb(139, 0, 139)",PURPLE:"rgb(128, 0, 128)",INDIGO:"rgb(75, 0, 130)",SLATEBLUE:"rgb(106, 90, 205)",DARKSLATEBLUE:"rgb(72, 61, 139)",MEDIUMSLATEBLUE:"rgb(123, 104, 238)",GREENYELLOW:"rgb(173, 255, 47)",CHARTREUSE:"rgb(127, 255, 0)",LAWNGREEN:"rgb(124, 252, 0)",LIME:"rgb(0, 255, 0)",LIMEGREEN:"rgb(50, 205, 50)",PALEGREEN:"rgb(152, 251, 152)",LIGHTGREEN:"rgb(144, 238, 144)",MEDIUMSPRINGGREEN:"rgb(0, 250, 154)",SPRINGGREEN:"rgb(0, 255, 127)",MEDIUMSEAGREEN:"rgb(60, 179, 113)",SEAGREEN:"rgb(46, 139, 87)",FORESTGREEN:"rgb(34, 139, 34)",GREEN:"rgb(0, 128, 0)",DARKGREEN:"rgb(0, 100, 0)",YELLOWGREEN:"rgb(154, 205, 50)",OLIVEDRAB:"rgb(107, 142, 35)",OLIVE:"rgb(128, 128, 0)",DARKOLIVEGREEN:"rgb(85, 107, 47)",MEDIUMAQUAMARINE:"rgb(102, 205, 170)",DARKSEAGREEN:"rgb(143, 188, 139)",LIGHTSEAGREEN:"rgb(32, 178, 170)",DARKCYAN:"rgb(0, 139, 139)",TEAL:"rgb(0, 128, 128)",AQUA:"rgb(0, 255, 255)",CYAN:"rgb(0, 255, 255)",LIGHTCYAN:"rgb(224, 255, 255)",PALETURQUOISE:"rgb(175, 238, 238)",AQUAMARINE:"rgb(127, 255, 212)",TURQUOISE:"rgb(64, 224, 208)",MEDIUMTURQUOISE:"rgb(72, 209, 204)",DARKTURQUOISE:"rgb(0, 206, 209)",CADETBLUE:"rgb(95, 158, 160)",STEELBLUE:"rgb(70, 130, 180)",LIGHTSTEELBLUE:"rgb(176, 196, 222)",POWDERBLUE:"rgb(176, 224, 230)",LIGHTBLUE:"rgb(173, 216, 230)",SKYBLUE:"rgb(135, 206, 235)",LIGHTSKYBLUE:"rgb(135, 206, 250)",DEEPSKYBLUE:"rgb(0, 191, 255)",DODGERBLUE:"rgb(30, 144, 255)",CORNFLOWERBLUE:"rgb(100, 149, 237)",MEDIUMSLATEBLUE:"rgb(123, 104, 238)",ROYALBLUE:"rgb(65, 105, 225)",BLUE:"rgb(0, 0, 255)",MEDIUMBLUE:"rgb(0, 0, 205)",DARKBLUE:"rgb(0, 0, 139)",NAVY:"rgb(0, 0, 128)",MIDNIGHTBLUE:"rgb(25, 25, 112)",CORNSILK:"rgb(255, 248, 220)",BLANCHEDALMOND:"rgb(255, 235, 205)",BISQUE:"rgb(255, 228, 196)",NAVAJOWHITE:"rgb(255, 222, 173)",WHEAT:"rgb(245, 222, 179)",BURLYWOOD:"rgb(222, 184, 135)",TAN:"rgb(210, 180, 140)",ROSYBROWN:"rgb(188, 143, 143)",SANDYBROWN:"rgb(244, 164, 96)",GOLDENROD:"rgb(218, 165, 32)",DARKGOLDENROD:"rgb(184, 134, 11)",PERU:"rgb(205, 133, 63)",CHOCOLATE:"rgb(210, 105, 30)",SADDLEBROWN:"rgb(139, 69, 19)",SIENNA:"rgb(160, 82, 45)",BROWN:"rgb(165, 42, 42)",MAROON:"rgb(128, 0, 0)",WHITE:"rgb(255, 255, 255)",SNOW:"rgb(255, 250, 250)",HONEYDEW:"rgb(240, 255, 240)",MINTCREAM:"rgb(245, 255, 250)",AZURE:"rgb(240, 255, 255)",ALICEBLUE:"rgb(240, 248, 255)",GHOSTWHITE:"rgb(248, 248, 255)",WHITESMOKE:"rgb(245, 245, 245)",SEASHELL:"rgb(255, 245, 238)",BEIGE:"rgb(245, 245, 220)",OLDLACE:"rgb(253, 245, 230)",FLORALWHITE:"rgb(255, 250, 240)",IVORY:"rgb(255, 255, 240)",ANTIQUEWHITE:"rgb(250, 235, 215)",LINEN:"rgb(250, 240, 230)",LAVENDERBLUSH:"rgb(255, 240, 245)",MISTYROSE:"rgb(255, 228, 225)",GAINSBORO:"rgb(220, 220, 220)",LIGHTGRAY:"rgb(211, 211, 211)",SILVER:"rgb(192, 192, 192)",DARKGRAY:"rgb(169, 169, 169)",GRAY:"rgb(128, 128, 128)",DIMGRAY:"rgb(105, 105, 105)",LIGHTSLATEGRAY:"rgb(119, 136, 153)",SLATEGRAY:"rgb(112, 128, 144)",DARKSLATEGRAY:"rgb(47, 79, 79)",BLACK:"rgb(0, 0, 0)"}}static isRGB(t){return null!==t.match(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/gi)}static isRGBA(t){return null!==t.match(/^rgba\((\d+),(\d+),(\d+),(\d+\.\d+)\)$/gi)}static isHEX(t){return null!==t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/gi)}static string2Color(t){const i=u.htmlColors[t.toUpperCase()];if(i&&(t=i),t=p(t),u.isRGB(t)||u.isRGBA(t)){let i=t.replace("rgb(","").replace("rgba(","").replace(")","").split(",");return{red:i[0],green:i[1],blue:i[2],alpha:i[3]||1}}if(u.isHEX(t)){const i=(t=t.replace("#","")).length/3;return{red:parseInt(t.substring(0,i),16),green:parseInt(t.substring(i,2*i),16),blue:parseInt(t.substring(2*i,3*i),16),alpha:1}}return{red:0,green:0,blue:0,alpha:0}}static rgbToHex(t){const i=(t=t.replace(/\s/g,"")).replace("rgb(","").replace("rgba(","").replace(")","").split(",");let e="#";return i.forEach((t,i)=>{if(3!=i){const i=Number(t).toString(16);e+=2===i.length?i:"0"+i}}),e}constructor(t){"string"==typeof t&&(t=u.string2Color(t)),this._red=t.red,this._green=t.green,this._blue=t.blue,this._alpha=t.alpha||1}get rgb(){return`rgb(${this._red},${this._green},${this._blue})`}get rgba(){return`rgba(${this._red},${this._green},${this._blue},${this._alpha})`}get hex(){return u.rgbToHex(this.rgb)}}class m{constructor({radius:t,color:i,lineWidth:e,selected:s,hover:n}){this._radius=t||0,this._lineWidth=e||0,this._color=i?new u(i):null,this._selected=s?new m({lineWidth:s.lineWidth,color:s.color}):null,this._hover=n?new m({lineWidth:n.lineWidth,color:n.color}):null}get radius(){return this._radius}set radius(t){this._radius=t}get color(){return this._color}set color(t){this._color=new u(t)}get selected(){return this._selected}get hover(){return this._hover}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t}}class f{constructor({offsetX:t,offsetY:i,color:e,blur:s}){this._offsetX=t,this._offsetY=i,this._color=new u(e),this._blur=s}get offsetX(){return this._offsetX}get offsetY(){return this._offsetY}get color(){return this._color}set color(t){this._color=new u(t)}get blur(){return this._blur}}class b{constructor({src:t,position:i,dimension:e,rotation:s,scale:n}){this._transform=new a({position:i,dimension:e,rotation:s,scale:n}),this._image=e?new Image(this._transform.dimension.width,this._transform.dimension.height):new Image,this._src=t,this._image.src=this._src,this._image.addEventListener("load",()=>{this._loaded=!0}),this._loaded=!1}set src(t){this._src=t,this._loaded=!1}get transform(){return this._transform}draw(t){this._transform.dimension?t.drawImage(this._image,this._transform.position.x,this._transform.position.y,this._transform.dimension.width,this._transform.dimension.height):t.drawImage(this._image,this._transform.position.x,this._transform.position.y)}}class E{constructor({color:t,image:i}){this._color=t?new u(t):null,this._image=i?new b({image:i}):null}get color(){return this._color}set color(t){this._color=new u(t)}get image(){return this._image}set Image(t){this._image=new b(t)}}class y{static get ROTATION(){return new Rotation({angle:0})}static get BACKGROUND(){return new E({color:"rgb(255,255,255)"})}static get SHADOW(){return new f({offsetX:0,offsetY:0,color:"rgb(0,0,0)",blur:0})}static get BORDER(){return new m({radius:0,lineWidth:1})}constructor({position:t,dimension:i,rotation:e,scale:s,background:n,border:o,shadow:r}){this._transform=new a({position:t,dimension:i,rotation:e,scale:s}),this._border=o?new m(o):y.BORDER,this._background=n?new E(n):y.BACKGROUND,this._shadow=r?new f(r):null,this._path=null}draw(t){this._shadow&&(t.shadowColor=this._shadow.color.rgba,t.shadowBlur=this._shadow.blur,t.shadowOffsetX=this._shadow.offsetX,t.shadowOffsetY=this._shadow.offsetY),this._border&&this._border.color&&(t.strokeStyle=this._border.color.rgba),this._border&&this._border.lineWidth&&(t.lineWidth=this._border.lineWidth),this._background&&this._background.color&&(t.fillStyle=this._background.color.rgba)}get sides(){const t=this._transform.dimension.width/2,i=this._transform.dimension.height/2;return{top:{x:this._transform.position.x+t,y:this._transform.position.y},right:{x:this._transform.position.x+this._transform.dimension.width,y:this._transform.position.y+i},bottom:{x:this._transform.position.x+t,y:this._transform.position.y+this._transform.dimension.height},left:{x:this._transform.position.x,y:this._transform.position.y+i}}}get path(){return this._path}set path(t){this._path=t}get border(){return this._border}get background(){return this._background}get rotation(){return this._transform.rotation}get rotate(){return this._transform.rotation&&this._transform.rotation.angle>0}get shadow(){return this._shadow}set rotation(t){this._transform.rotation.angle=t}get position(){return this._transform.position}set position(t){this._transform.position.x=t.x,this._transform.position.y=t.y}get dimension(){return this._transform.dimension}}class w extends y{constructor({position:t,rotation:i,border:e,background:s,diameter:n,shadow:o}){super({position:t,rotation:i,border:e,background:s,shadow:o}),this._diameter=n}draw(t){t.save(),super.draw(t),this.rotate&&(t.translate(this.position.x,this.position.y),t.rotate(this.rotation.angle),t.translate(-this.position.x,-this.position.y)),t.beginPath(),this._path=new Path2D,this._path.arc(this.position.x,this.position.y,this._diameter,0,2*Math.PI),this._path.closePath(),t.stroke(this._path),t.fill(this._path),t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.stroke(this._path),t.restore()}}class x extends y{constructor({position:t,dimension:i,rotation:e,border:s,background:n,shadow:o}){super({position:t,dimension:i,rotation:e,border:s,background:n,shadow:o})}draw(t){if(t.save(),super.draw(t),this.rotate){const i=this.position.x+this.dimension.width/2,e=this.position.y+this.dimension.height/2;t.translate(i,e),t.rotate(this.rotation.angle),t.translate(-i,-e)}this._path=new Path2D,t.beginPath(),this._path.moveTo(this.sides.top.x-this.border.radius,this.sides.top.y+this.border.radius),this._path.quadraticCurveTo(this.sides.top.x,this.sides.top.y+.5*this.border.radius,this.sides.top.x+this.border.radius,this.sides.top.y+this.border.radius),this._path.lineTo(this.sides.right.x-this.border.radius,this.sides.right.y-this.border.radius),this._path.quadraticCurveTo(this.sides.right.x,this.sides.right.y,this.sides.right.x-this.border.radius,this.sides.right.y+this.border.radius),this._path.lineTo(this.sides.bottom.x+this.border.radius,this.sides.bottom.y-this.border.radius),this._path.quadraticCurveTo(this.sides.bottom.x,this.sides.bottom.y-.5*this.border.radius,this.sides.bottom.x-this.border.radius,this.sides.bottom.y-this.border.radius),this._path.lineTo(this.sides.left.x+this.border.radius,this.sides.left.y+this.border.radius),this._path.quadraticCurveTo(this.sides.left.x,this.sides.left.y,this.sides.left.x+this.border.radius,this.sides.left.y-this.border.radius),this._path.lineTo(this.sides.top.x-this.border.radius,this.sides.top.y+this.border.radius),this._path.closePath(),t.stroke(this._path),t.fill(this._path),t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.stroke(this._path),t.restore()}}class v extends y{constructor({points:t,position:i,dimension:e,rotation:s,border:n,background:o,shadow:r}){super({position:i,dimension:e,rotation:s,border:n,background:o,shadow:r}),this._points=t}draw(t){if(t.save(),super.draw(t),this.rotate){const i=this._position.x+this._dimension.width/2,e=this._position.y+this._dimension.height/2;t.translate(i,e),t.rotate(this.rotation.angle),t.translate(-i,-e)}this._path=new Path2D,t.beginPath(),this._path.moveTo(points[0].x,points[0].y),points.forEach(t=>{this._path.lineTo(t.x,t.y)}),this._path.closePath(),t.stroke(this._path),t.fill(this._path),t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.stroke(this._path),t.restore()}}class A extends y{constructor({position:t,dimension:i,rotation:e,border:s,background:n,shadow:o}){super({position:t,dimension:i,rotation:e,border:s,background:n,shadow:o})}draw(t){if(t.save(),super.draw(t),this.rotate){const i=this.position.x+this.dimension.width/2,e=this.position.y+this.dimension.height/2;t.translate(i,e),t.rotate(this.rotation.angle),t.translate(-i,-e)}this._path=new Path2D;var i=this.position.x+this.dimension.width,e=this.position.y+this.dimension.height;t.beginPath(),"object"==typeof this.border.radius?(this._path.moveTo(this.position.x+this.border.radius.topLeft,this.position.y),this._path.lineTo(i-this.border.radius.topRight,this.position.y),this._path.quadraticCurveTo(i,this.position.y,i,this.position.y+this.border.radius.topRight),this._path.lineTo(i,this.position.y+this.dimension.height-this.border.radius.bottomRight),this._path.quadraticCurveTo(i,e,i-this.border.radius.bottomRight,e),this._path.lineTo(this.position.x+this.border.radius.bottomLeft,e),this._path.quadraticCurveTo(this.position.x,e,this.position.x,e-this.border.radius.bottomLeft),this._path.lineTo(this.position.x,this.position.y+this.border.radius.topLeft),this._path.quadraticCurveTo(this.position.x,this.position.y,this.position.x+this.border.radius.topLeft,this.position.y)):(this._path.moveTo(this.position.x+this.border.radius,this.position.y),this._path.lineTo(i-this.border.radius,this.position.y),this._path.quadraticCurveTo(i,this.position.y,i,this.position.y+this.border.radius),this._path.lineTo(i,this.position.y+this.dimension.height-this.border.radius),this._path.quadraticCurveTo(i,e,i-this.border.radius,e),this._path.lineTo(this.position.x+this.border.radius,e),this._path.quadraticCurveTo(this.position.x,e,this.position.x,e-this.border.radius),this._path.lineTo(this.position.x,this.position.y+this.border.radius),this._path.quadraticCurveTo(this.position.x,this.position.y,this.position.x+this.border.radius,this.position.y)),this._path.closePath(),this.border&&this.border.color&&t.stroke(this._path),this._background&&this._background.color&&t.fill(this._path),t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,this.border&&this.border.color&&t.stroke(this._path),t.restore()}get area(){return this.dimension.width*this.dimension.height}get center(){return{x:this.position.x+this.dimension.width/2,y:this.position.y+this.dimension.height/2}}}class C extends y{constructor({position:t,dimension:i,rotation:e,border:s,background:n,shadow:o}){super({position:t,dimension:i,rotation:e,border:s,background:n,shadow:o})}draw(t){t.save(),super.draw(t),this.rotate&&(t.translate(this.position.x,this.position.y),t.rotate(this.rotation.angle),t.translate(-this.position.x,-this.position.y)),this._path=new Path2D,t.beginPath(),this._path.moveTo(this.position.x,this.position.y),this._path.lineTo(this.position.x-this.dimension.width,this.position.y-this.dimension.height/2),this._path.lineTo(this.position.x-this.dimension.width,this.position.y+this.dimension.height/2),this._path.closePath(),t.stroke(this._path),t.fill(this._path),t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.stroke(this._path),t.restore()}}const D=function({fontFamily:t,fontSize:i,fontWeight:e,element:s}){const n=s||document.body;var o=document.createElement("span");o.innerHTML="Hg",o.setAttribute("style",`font-family: ${t} !important; font-size: ${i}px !important; font-weight:${e} !important;`);var r=document.createElement("div");r.style.display="inline-block",r.style.width="1px",r.style.height="0px";var a=document.createElement("div");a.appendChild(o),a.appendChild(r),n.appendChild(a);try{var h={};r.style.verticalAlign="baseline",h.ascent=r.offsetTop-o.offsetTop,r.style.verticalAlign="bottom",h.height=r.offsetTop-o.offsetTop,h.descent=h.height-h.ascent}finally{a.remove()}return h};class B{static get FONT(){return{family:"Arial",style:"normal",variant:"normal",color:"rgb(212,212,212)",size:50,weight:"bold"}}constructor({family:t,style:i,variant:e,color:s,size:n,weight:o}){this._family=t,this._style=i,this._variant=e,this._color=new u(s),this._size=n,this._weight=o,this._setFontDimensions()}set family(t){this._family=t,this._setFontDimensions()}set fontSize(t){this._fontSize=t,this._setFontDimensions()}set fontWeight(t){this._fontSize=t,this._setFontDimensions()}get font2Canvas(){return`${this._style||""} ${this._variant||""} ${this._weight||""} ${this._size?this._size+"px":""} ${this._family||""}`}get family(){return this._family}get style(){return this._style}get variant(){return this._variant}get color(){return this._color}set color(t){this._color=new u(t)}get size(){return this._size}get weight(){return this._weight}get dimensions(){return this._dimensions}_setFontDimensions(){this._dimensions=D({fontFamily:this._family,fontSize:this._size,fontWeight:this._weight})}}class L{constructor({weight:t,color:i,enableBezierCurves:e,dashed:s,lineCap:n}){this._weight=t,this._color=new u(i),this._enableBezierCurves=e,this._dashed=s,this._lineCap=n||"round"}get weight(){return this._weight}get color(){return this._color}get enableBezierCurves(){return this._enableBezierCurves}get dashed(){return this._dashed}get lineCap(){return this._lineCap}}const T=()=>/Mobi|Android/i.test(navigator.userAgent),I=function(t,i,e,s,n,o,r,a,h){return{x:Math.pow(1-t,3)*i+3*t*Math.pow(1-t,2)*s+3*t*t*(1-t)*o+t*t*t*a,y:Math.pow(1-t,3)*e+3*t*Math.pow(1-t,2)*n+3*t*t*(1-t)*r+t*t*t*h}},O=function(t,i,e,s,n,o,r){return{x:(1-t)*(1-t)*i+2*(1-t)*t*s+t*t*o,y:(1-t)*(1-t)*e+2*(1-t)*t*n+t*t*r}},F=({startPoint:t,controlPoint1:i,controlPoint2:e,endPoint:s,numberOfPointsToGenerate:n})=>{let o=[],r=n||50;for(let n=0;n<=r;n++){let a=null;a=e?I(n/r,t.x,t.y,i.x,i.y,e.x,e.y,s.x,s.y):O(n/r,t.x,t.y,i.x,i.y,s.x,s.y),o.push(a)}return o},R=t=>{let i=[];for(let e=1;e<t.length;e++){const s=t[e];if(s.x===t[e-1].x){const n=(s.y-t[e-1].y)/50;for(let o=0;o<50;o++)i.push({x:s.x,y:t[e-1].y+n*o})}else if(s.y===t[e-1].y){const n=(s.x-t[e-1].x)/50;for(let o=0;o<50;o++)i.push({x:t[e-1].x+n*o,y:s.y})}}return i.push({x:t[t.length-1].x,y:t[t.length-1].y}),i}}])},function(t,i,e){},function(t){t.exports=JSON.parse('{"account":"#7F8DE1","action_list_component":"#5876A2","actions_and_buttons":"#F2B85C","activations":"#b773df","address":"#00c07d","agent_session":"#EE8961","all":"#54698D","announcement":"#62B7ED","answer_best":"#F2CF5B","answer_private":"#F2CF5B","answer_public":"#F2CF5B","apex_plugin":"#54698D","apex":"#54698D","app":"#F2B85C","approval":"#5BCC7A","apps_admin":"#9895EE","apps":"#4B97DD","article":"#F2CF5B","asset_action_source":"#387A92","asset_action":"#387A92","asset_downtime_period":"#387A92","asset_object":"#387A92","asset_relationship":"#EF965C","asset_state_period":"#387A92","assigned_resource":"#55C173","assignment":"#EF993D","avatar_loading":"#B8C2CE","avatar":"#61B7ED","bot_training":"#5876A3","bot":"#54698F","branch_merge":"#E9696E","brand":"#7E8AE4","business_hours":"#7DC37D","buyer_account":"#38844A","buyer_group":"#38844A","calibration":"#61CFD2","call_coaching":"#4B97DD","call_history":"#F2CF5B","call":"#F2CF5B","campaign_members":"#EF9656","campaign":"#EF9656","cancel_checkout":"#969492","canvas":"#8099AF","carousel":"#6BBD6E","case_change_status":"#F2CF5B","case_comment":"#F2CF5B","case_email":"#F2CF5B","case_log_a_call":"#F2CF5B","case_milestone":"#F2CF5B","case_transcript":"#F2CF5B","case_wrap_up":"#F2CF5B","case":"#F2CF5B","catalog":"#357E45","category":"#357E45","channel_program_history":"#51B58A","channel_program_levels":"#51B58A","channel_program_members":"#51B58A","channel_programs":"#51B58A","charts":"#5BCAA0","choice":"#54698D","client":"#61D3BD","cms":"#88C651","coaching":"#ED7494","code_playground":"#54698D","collection_variable":"#54698D","connected_apps":"#9895EE","constant":"#54698D","contact_list":"#A094ED","contact_request":"#EE8855","contact":"#A094ED","contract_line_item":"#6EC06E","contract":"#6EC06E","currency_input":"#969492","currency":"#969492","custom_notification":"#6AB7E4","custom":"#8099AF","customer_360":"#152F61","customer_lifecycle_analytics":"#9273DF","customer_portal_users":"#4B97DB","customers":"#51B58A","dashboard_ea":"#7E8AE4","dashboard":"#EC6E63","data_integration_hub":"#36729D","data_model":"#EB6F92","data_streams":"#EC6E63","datadotcom":"#4789EE","dataset":"#B070E6","date_input":"#969492","date_time":"#969492","decision":"#EF993D","default":"#8099AF","delegated_account":"#38844A","display_rich_text":"#969492","display_text":"#969492","document":"#BAAC93","drafts":"#6CA0E9","dynamic_record_choice":"#54698D","education":"#4B97DD","einstein_replies":"#EE8865","email_chatter":"#F2CF5B","email":"#95AEC5","employee_asset":"#4FA1E0","employee_contact":"#4FA1E0","employee_job_position":"#4FA1E0","employee_job":"#4FA1E0","employee_organization":"#4FA1E0","employee":"#4FA1E0","empty":"#8099AF","endorsement":"#8B9AE3","entitlement_policy":"#38844A","entitlement_process":"#7E8AE4","entitlement_template":"#7E8AE4","entitlement":"#7E8AE4","entity_milestone":"#EF9656","entity":"#EE8862","environment_hub":"#54698D","event":"#EB6F92","events":"#4B97DB","expense_report_entry":"#3A3180","expense_report":"#3A3180","expense":"#3A3180","feed":"#61B7ED","feedback":"#6DA0E9","file":"#6DA0E9","filter":"#3039EE","first_non_empty":"#E9696E","flow":"#3C79BC","folder":"#8B9AE3","forecasts":"#6BBD6E","formula":"#54698D","fufillment_order":"#B9AC91","generic_loading":"#B8C3CE","global_constant":"#54698D","goals":"#56AADE","group_loading":"#B8C2CE","groups":"#779EF2","hierarchy":"#59BECD","high_velocity_sales":"#60CFC8","home":"#EE7EAD","household":"#50B09F","individual":"#4B97DD","insights":"#EC94ED","instore_locations":"#54698D","investiment_account":"#55C076","invocable_action":"#54698D","iot_context":"#36729D","iot_orchestration":"#36729D","javascript_button":"#F2B85B","job_family":"#4FA1E0","job_position":"#4FA1E0","job_profile":"#EB6F92","kanban":"#4B97DD","knowledge":"#EC94ED","load_insights":"#55B0E6","lead_list":"#EE8862","lead":"#EE8862","letterhead":"#4B97DD","lightning_component":"#969492","lightning_usage":"#7E8AE4","link":"#7A9AE6","list_email":"#8BAEB5","live_chat_visitor":"#EE8961","live_chat":"#EE8961","location":"#55C076","log_a_call":"#5BC3CC","logging":"#4FA2DF","loop":"#EF993D","macros":"#61CFD2","maintenance_asset":"#36729D","maintenance_plan":"#36729D","marketing_actions":"#6BBD6E","merge":"#F2CF5B","messaging_onversation":"#59BECD","messaging_session":"#59BECD","messaging_user":"#59BECD","metrics":"#56AADE","multi_picklist":"#969492","multi_select_checkbox":"#969492","news":"#7F8DE1","note":"#E6D478","number_input":"#969492","omni_supervisor":"#8A76F0","operating_hours":"#8A76F0","opportunity_contact_role":"#8A76F0","opportunity_splits":"#F2B85B","opportunity":"#F2B85B","order_item":"#759DD3","orders":"#769ED9","autcome":"#EF993D","output":"#499CBA","partner_fund_allocation":"#51B58A","partner_fund_claim":"#51B58A","partner_fund_request":"#51B58A","partner_marketing_budget":"#51B58A","partners":"#51B58A","password":"#969492","past_chat":"#EE8961","people":"#59BECD","performance":"#F2B156","person_account":"#7F8DE1","photo":"#D7D1D1","picklist_choice":"#54698D","picklist_type":"#969492","planogram":"#4B97DD","poli":"#699BE1","portal_roles_and_subordinates":"#7A9AE6","portal_roles":"#EE8851","portal":"#AEC76F","post":"#64CAE4","priebook":"#B781D3","process":"#3C79BC","product_consumed":"#55BC9C","product_item_transaction":"#EE8862","product_item":"#769ED9","product_request_line_item":"#88C651","product_request":"#88C651","product_required":"#EC6E63","product_transfer":"#EE8862","product":"#B781D3","proposition":"#4B97DD","question_best":"#F2CF5B","question_feed":"#F2CF5B","queue":"#54698D","quick_text":"#62B7E5","quip_sheet":"#58C859","quip":"#D3451C","quotes":"#88C651","radio_button":"#969492","read_receapts":"#55C076","recent":"#6CA0E9","record_create":"#EB6F92","record_delete":"#EB6F92","user":"#64CAE4"}')},function(t,i,e){"use strict";e.r(i),e.d(i,"Schema",(function(){return g})),e.d(i,"salesforceFont",(function(){return u.a})),e.d(i,"gridSVG",(function(){return c})),e.d(i,"isMobile",(function(){return s.isMobile}));var s=e(0);class n extends s.Entity{constructor({label:t,name:i,type:e,position:n,dimension:o,border:r,font:a,reference:h,parent:d},l){super({name:i,position:n,dimension:o},l),this._label=t,this._type=e||"",this._font=new s.Font(a),this._shape=new s.Rectangle({position:this.position,dimension:this.dimension,border:r}),this._connection,this._parent=d,this._reference=h,Object.defineProperty(this._shape,"sides",{get:function(){const t=this._transform.dimension.height/2;return{right:{x:this._transform.position.x+this._transform.dimension.width+21,y:this._transform.position.y+t},left:{x:this._transform.position.x-11,y:this._transform.position.y+t}}}})}draw(t){t.save(),this._shape.draw(t),t.font=this._font.font2Canvas,t.textBaseline="top",t.fillStyle=this._font.color.hex;const i=this._transform.position.y+this._font.dimensions.height/5;t.fillText(this._label,this._transform.position.x,i);const e=t.measureText(this._type).width;t.fillText(this._type,this._parent.position.x+this._parent.dimension.width-this._parent.padding.right-e-10,i),t.restore()}}class o extends s.Entity{constructor({name:t,src:i,position:e,padding:n,dimension:o,background:r,border:a,parent:h}){super({position:e,padding:n,dimension:o,parent:h}),this._loaded=!1,this._image=new Image,this._name=t,this._image.src=i,this._image.addEventListener("load",()=>{this._loaded=!0}),this._shape=new s.Rectangle({position:this.position,dimension:this.dimension,background:r,border:a})}get image(){return this._image}get loaded(){return this._loaded}draw(t){t.save(),this._shape.background&&(t.translate(this.padding.left,this.padding.top),this._shape.draw(t),t.translate(-this.padding.left,-this.padding.top)),t.drawImage(this.image,this.position.x+this.padding.left,this.position.y+this.padding.top,this.dimension.width,this.dimension.height),t.restore()}}var r=e(2);class a extends s.Entity{constructor({title:t,icon:i,font:e,position:n,dimension:a,background:h,shadow:d,border:l,padding:_,parent:c},g){if(super({name:"header_"+t,position:n,dimension:a,padding:_,parent:c},g),this._title=t,this._font=e?new s.Font(e):s.Font.FONT,this._shape=new s.Rectangle({position:this.position,dimension:this.dimension,shadow:d,border:l,background:h}),Object.defineProperty(this._shape,"sides",{get:function(){const t=this._transform.dimension.height/2;return{right:{x:this._transform.position.x+this._transform.dimension.width,y:this._transform.position.y+t},left:{x:this._transform.position.x,y:this._transform.position.y+t}}}}),i){const t=i.name.split(":");i.background.color=r[t[1]],this._icon=new o({name:i.name,src:`${this._canvas._imagesSource||"."}/salesforce-icons/${t[0]}/${t[1]}.svg`,parent:this,position:this.position,dimension:i.dimension||{width:25,height:25},padding:{left:0,top:0,right:0,bottom:0},background:i.background,padding:i.padding,border:i.border})}}draw(t){this._shape.draw(t),t.save(),t.font=this._font.font2Canvas,t.textBaseline="top",t.fillStyle=this._font.color.hex,t.fillText(this._title,this._shape.position.x+this._padding.left+this._icon.dimension.width+this._icon.padding.right,this._shape.position.y+this._padding.top),t.restore(),this._icon&&this._icon.draw(t)}}class h extends s.Entity{constructor({name:t,position:i,dimension:e,background:n,shadow:o,border:r,padding:a,parent:h},d){super({name:"footer_"+t,position:i,dimension:e,padding:a,parent:h},d),this._shape=new s.Rectangle({position:this.position,dimension:this.dimension,shadow:o,border:r,background:n}),Object.defineProperty(this._shape,"sides",{get:function(){const t=this._transform.dimension.height/2;return{right:{x:this._transform.position.x+this._transform.dimension.width,y:this._transform.position.y+t},left:{x:this._transform.position.x,y:this._transform.position.y+t}}}})}draw(t){t.save(),this._shape.position.x=this._parent.position.x,this._shape.position.y=this._parent.position.y+this._parent.dimension.height-this._transform.dimension.height+this._parent.padding.bottom,this._shape.draw(t),t.restore()}}class d{constructor({position:t,dimension:i,color:e}){this._transform=new s.Transform({position:t,dimension:i}),this._color=new s.Color(e)}draw(t){t.save(),t.translate(this._transform.position.x,this._transform.position.y),t.rotate(this._transform.rotation.angle),t.translate(-this._transform.position.x,-this._transform.position.y),t.strokeStyle=this._color.rgba,t.lineWidth=5,t.lineCap="round",t.fillStyle="white",t.beginPath(),t.arc(this._transform.position.x-5,this._transform.position.y,5,0,2*Math.PI),t.closePath(),t.stroke(),t.fill(),t.strokeStyle=this._color.rgba,t.lineWidth=3,t.beginPath(),t.moveTo(this._transform.position.x+2,this._transform.position.y),t.lineTo(this._transform.position.x+14,this._transform.position.y),t.moveTo(this._transform.position.x+2,this._transform.position.y),t.lineTo(this._transform.position.x+14,this._transform.position.y+8),t.moveTo(this._transform.position.x+2,this._transform.position.y),t.lineTo(this._transform.position.x+14,this._transform.position.y-8),t.stroke(),t.restore()}get transform(){return this._transform}}class l extends s.Entity{static get PADDING(){return 15}constructor({name:t,from:i,to:e,line:n,connector:o,padding:r,isEditable:a,showPathPoints:h}){super({name:t}),this._z=0,this._from=i,this._to=e,this._line=new s.Line(n),o.position=e.position,this._connector=new d(o),this.isEditable=a,this._showPathPoints=h,this._oldToDimensions={width:this._to.dimension.width,height:this._to.dimension.height},this._oldFromDimensions={width:this._from.dimension.width,height:this._from.dimension.height},this._padding=r||l.PADDING}draw(t){let i=this.path;if(i.length>0){t.save(),t.lineWidth=this._line.weight,t.strokeStyle=this._line.color.hex,this._line.dashed&&t.setLineDash(this._line.dashed),t.lineWidth=this._line.weight,t.lineCap="square",t.beginPath();const e=i[0];if(t.moveTo(e.x,e.y),this._line&&this._line.enableBezierCurves){const e=i[1],s=i[2],n=i[3];t.bezierCurveTo(e.x,e.y,s.x,s.y,n.x,n.y)}else for(let e=1;e<i.length;e++){const s=i[e];t.lineTo(s.x,s.y)}t.stroke(),t.closePath(),t.restore();const s=i[i.length-1],n=i[i.length-2],o=s.x-n.x,r=s.y-n.y;this._connector.transform.rotation.angle=Math.atan2(r,o),this._connector.transform.position=s,this._connector.draw(t)}}get connectionPoints(){let t=1/0,i={};for(let[e,s]of Object.entries(this._from.shape.sides))for(let[n,o]of Object.entries(this._to.shape.sides)){const r=Math.abs(s.x-o.x);r<t&&(t=r,s.name=e,o.name=n,i={origin:s,destination:o})}return i}get path(){const t=this.connectionPoints,i=t.origin,e=t.destination;let s=Math.abs(e.x-i.x),n=s/2,o=[];if(i.name!==e.name){let t=i.x>=e.x?1:-1;s<200?o.push({x:i.x,y:i.y},{x:i.x-50*t,y:i.y},{x:e.x+50*t,y:e.y},{x:e.x+this._padding*t,y:e.y}):o.push({x:i.x,y:i.y},{x:i.x-n*t,y:i.y},{x:e.x+n*t,y:e.y},{x:e.x+this._padding*t,y:e.y})}else{const t="right"===i.name?1:-1;o.push({x:i.x,y:i.y},{x:i.x+50*t,y:i.y},{x:e.x+50*t,y:e.y},{x:e.x+this._padding*t,y:e.y})}return o}get to(){return this._to}get from(){return this._from}}class _ extends s.Entity{constructor({name:t,label:i,icon:e,font:o,fields:r,position:d,dimension:l,isDraggable:_,background:c,shadow:g,border:p,header:u,footer:m,padding:f},b){super({name:t,position:d,dimension:l,padding:f},b),this._z=1,this._label=i,this._font=o?new s.Font(o):s.Font.FONT,this._isDraggable=_||!1,this._shape=new s.Rectangle({position:this.position,dimension:this.dimension,border:p,background:c}),this._header=new a({title:i,font:o,icon:e,parent:this,position:this.position,dimension:{width:this.dimension.width,height:35},padding:f,border:u&&u.border?u.border:p},b),this._footer=new h({name:i,font:o,parent:this,position:{x:this.position.x,y:this.position.y+this.dimension.height-35},dimension:{width:this.dimension.width,height:35},padding:f,border:m&&m.border?m.border:p,shadow:g},b),this._fields=[];let E=0;r.forEach(t=>{const i=new s.Font(t.font),e=new n({label:t.label,name:t.name,parent:this,reference:t.reference,position:{x:this._shape.position.x,y:i.dimensions.height*E},dimension:{width:this._shape.dimension.width-2*this._padding.right-10,height:i.dimensions.height},font:i,border:t.border,type:t.type},b);this._fields.push(e),E++}),this._calculateScrollBarDimensions(),this._showScrollBar=!1,this._scrollPosition=0,this._scrollBarColor="rgba(0,0,0,0.2)",this._scrollBar=new Path2D,this.on("wheel",t=>{let i=this._canvas.getTransformedPoint(t.clientX,t.clientY);if(i.x>=this._shape.position.x+this._padding.left&&i.x<=this._shape.position.x+this._padding.left+this._shape.dimension.width-2*this._padding.right&&i.y>=this._shape.position.y+this._padding.top+10&&i.y<=this._shape.position.y+this._padding.top+this._shape.dimension.height-10-this._footer.dimension.height){const i=Math.sign(t.deltaY),e=this._shape.position.y+this._padding.top+this._font.dimensions.height+10+this._scrollPosition,s=e+this._fields.length*this._fields[0]._font.dimensions.height>this._shape.position.y+this._padding.top+this._shape.dimension.height-10-this._footer.dimension.height,n=e<this._shape.position.y+this._padding.top+this._font.dimensions.height+10;(s&&i>0||n&&i<0)&&(this._scrollPosition-=5*i)}}),this.on("mousemove",t=>{let i={x:t.offsetX,y:t.offsetY};this._fields.forEach(t=>{t.contains(i)?t._shape.background.color="#f3f2f2":t._shape.background.color="white"}),this._canvas.ctx.isPointInPath(this._scrollBar,i.x,i.y,"nonzero")?this._scrollBarColor="rgba(0,0,0,0.3)":this._scrollBarColor="rgba(0,0,0,0.2)"}),this.on("mousehover",t=>{this._showScrollBar=!0}),this.on("mouseleave",t=>{this._showScrollBar=!1})}draw(t){this._shape.draw(t),this._header.draw(t),t.save(),t.beginPath();const i=this.position.y+this._header.dimension.height+10,e=i+this._shape.dimension.height-this._padding.top-this._font.dimensions.height-20;t.rect(this._shape.position.x+this._padding.left,i,this._shape.dimension.width-2*this._padding.right,this._shape.dimension.height-this._padding.top-this._font.dimensions.height-10-this._footer.dimension.height),t.clip(),this._fields.forEach((s,n)=>{const o=this._shape.position.y+this._padding.top+this._font.dimensions.height+10+s._font.dimensions.height*n+this._scrollPosition;s.position={x:this._shape.position.x+this._padding.left,y:o};const r=o<i-15||o>e-this._footer.dimension.height-3;s._connection&&(s._reference!==this._name?s._connection._to=r?this._header:s:s._connection._from=r?this._header:s),s.draw(t)}),t.restore(),this._hasScroolBar&&this._showScrollBar&&(t.save(),t.fillStyle="rgba(0,0,0,0.1)",t.beginPath(),t.rect(this._shape.position.x+this._padding.left+this._shape.dimension.width-2*this._padding.right-5,this._shape.position.y+this._padding.top+this._font.dimensions.height+10,5,this._shape.dimension.height-this._padding.top-this._font.dimensions.height-10-this._footer.dimension.height),t.fill(),t.restore(),t.save(),t.fillStyle=this._scrollBarColor,t.beginPath(),this._scrollBar=new Path2D,this._scrollBar.rect(this._shape.position.x+this._padding.left+this._shape.dimension.width-2*this._padding.right-5,this._shape.position.y+this._padding.top+this._font.dimensions.height+9.5-this._scrollPosition*this._percentOfVisibleFields,5,this._scrollbarSize),t.fill(this._scrollBar),t.restore()),this._footer.draw(t)}addField(t){const i=new s.Font(t.font),e=new n({label:t.label,name:t.name,parent:this,reference:t.reference,position:{x:this._shape.position.x,y:i.dimensions.height*this._fields.length},dimension:{width:this._shape.dimension.width-2*this._padding.right-10,height:i.dimensions.height},font:i,border:t.border,type:t.type},this._canvas);this._fields.push(e),this.addConnectionToField(e),this._calculateScrollBarDimensions()}addConnectionToField(t){if(t._reference){const i=this._canvas.entityManager.getEntityByName(t._reference);if(i){const e={name:`${this._name}-${t._name}-${i._name}`,isEditable:!1,connector:{shape:"triangle",dimension:{width:10,height:10},color:"rgb(180,180,180)"},line:{weight:3,color:"rgb(180,180,180)",enableBezierCurves:!0},to:t,from:i._header};this._name===t._reference&&(e.to=i._footer,e.from=t);const s=new l(e);t._connection=s,this._canvas.entityManager.addEntity(s,this._canvas)}}}setIcon(){}_calculateScrollBarDimensions(){this._clipAreaHeight=this._shape.dimension.height-this._padding.top-this._font.dimensions.height-10-this._footer.dimension.height,this._scrollableAreaHeight=this._fields.length*this._fields[0]._font.dimensions.height;const t=this._clipAreaHeight/this._fields[0]._font.dimensions.height;this._percentOfVisibleFields=t/this._fields.length,this._scrollbarSize=parseInt(this._clipAreaHeight*this._percentOfVisibleFields).toFixed(2),this._hasScroolBar=this._scrollableAreaHeight>this._clipAreaHeight}}var c=e.p+"assets/images/grid.svg";class g{constructor({canvas:t,options:i,data:e}){i.drawGrid&&(i.backgroundImage=`url('${c}')`),this._canvas=new s.Canvas({canvas:t,options:i}),this.data=e}getTableByName(t){return this._canvas.entityManager.getEntityByName(t)}addTable(t){const i=new _(t,this._canvas);this._canvas.entityManager.addEntity(i,this._canvas);const e=this._canvas.entityManager.getEntitiesInLayer(1);for(let t of e)t._fields.forEach(i=>{if(i._reference){const e=this._canvas.entityManager.getEntityByName(i._reference);if(e){const s={name:`${t._name}-${i._name}-${e._name}`,isEditable:!1,connector:{shape:"triangle",dimension:{width:10,height:10},color:"rgb(180,180,180)"},line:{weight:3,color:"rgb(180,180,180)",enableBezierCurves:!0},to:i,from:e._header};t._name===i._reference&&(s.to=e._footer,s.from=i);const n=new l(s);i._connection=n,this._canvas.entityManager.addEntity(n,this._canvas)}}})}removeTableByName(t){const i=this._canvas.entityManager.getEntityByName(t);this._canvas.entityManager.removeEntityByName(t);const e=this._canvas.entityManager.getEntitiesInLayer(0);for(let t of e)t._to._parent._name!==i._name&&t._from._parent._name!=i._name||this._canvas.entityManager.removeEntityByName(t._name)}addFieldToTable(t,i){this._canvas.entityManager.getEntityByName(i).addField(t)}set data(t){let i={};for(let[e,s]of Object.entries(t)){const t=new _(s,this._canvas);i[e]=t}Object.values(i).forEach(t=>{this._canvas.entityManager.addEntity(t,this._canvas),t._fields.forEach(i=>{t.addConnectionToField(i)})}),this._canvas.draw()}get data(){let t={tables:[]};const i=this._canvas.entityManager.getEntitiesInLayer(1);for(let e of i){let i={name:e._name,label:e._label,position:e.position,dimension:{width:e.dimension.width,height:e.dimension.height},icon:e._header._icon._name,fields:[]};e._fields.forEach(t=>{i.fields.push({name:t._name,label:t._label,reference:t._reference})}),t.tables.push(i)}return t}on(t,i){"onkeypress"===t||"onkeyup"===t||"onkeydown"===t?window[t]=i:this._canvas._el.addEventListener(t,i)}saveAsImage(t){this.canvas.saveAsImage(t)}}var p=e(1),u=e.n(p)}])}));